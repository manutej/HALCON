#!/bin/bash
# HALCON Chart Command - Generate Natal Chart
# Now uses the new TypeScript implementation with Swiss Ephemeris

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_DIR="$SCRIPT_DIR/.."

# Colors
CYAN='\033[0;36m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

# Show usage if no args
if [ $# -eq 0 ]; then
    echo -e "${CYAN}╔════════════════════════════════════════════╗${NC}"
    echo -e "${CYAN}║         HALCON NATAL CHART                 ║${NC}"
    echo -e "${CYAN}╚════════════════════════════════════════════╝${NC}"
    echo ""
    echo "Generate a natal chart with planetary positions"
    echo ""
    echo -e "${GREEN}Profile Usage:${NC}"
    echo "  chart <profile_name>"
    echo ""
    echo "Examples:"
    echo "  chart manu"
    echo "  chart melo"
    echo ""
    echo -e "${GREEN}Direct Usage:${NC}"
    echo "  chart <date> <time> --latitude LAT --longitude LON [options]"
    echo ""
    echo "Required:"
    echo "  date                Birth date (YYYY-MM-DD or 'now')"
    echo "  time                Birth time (HH:MM:SS)"
    echo "  --latitude LAT      Birth latitude"
    echo "  --longitude LON     Birth longitude"
    echo ""
    echo "Optional:"
    echo "  --location NAME     Location name"
    echo "  --house-system SYS  House system (placidus, koch, equal, whole-sign)"
    echo "  --json              Output as JSON"
    echo "  --no-chiron         Exclude Chiron"
    echo "  --no-lilith         Exclude Lilith"
    echo "  --no-nodes          Exclude lunar nodes"
    echo ""
    echo "Direct Examples:"
    echo "  chart 1990-03-10 12:55:00 --latitude 15.83 --longitude 78.04 --location \"Kurnool, India\""
    echo "  chart now --latitude 40.7128 --longitude -74.0060"
    echo ""
    exit 0
fi

# Call new TypeScript implementation
cd "$PROJECT_DIR"
exec npm run chart -- "$@"
