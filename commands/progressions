#!/bin/bash
# HALCON Progressions Command - Secondary Progressions
# Usage:
#   Profile: progressions <profile_name> [--to DATE]
#   Direct: progressions <date> <time> --latitude LAT --longitude LON [--to DATE]

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_DIR="$SCRIPT_DIR/.."

# Colors
CYAN='\033[0;36m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

# Show usage if no args or --help
if [ $# -eq 0 ] || [ "$1" = "--help" ] || [ "$1" = "-h" ]; then
    echo -e "${CYAN}╔════════════════════════════════════════════╗${NC}"
    echo -e "${CYAN}║     HALCON SECONDARY PROGRESSIONS          ║${NC}"
    echo -e "${CYAN}╚════════════════════════════════════════════╝${NC}"
    echo ""
    echo "Calculate secondary progressions (1 day = 1 year)"
    echo ""
    echo -e "${GREEN}Profile Usage:${NC}"
    echo "  progressions <profile_name> [--to DATE]"
    echo ""
    echo "Examples:"
    echo "  progressions manu"
    echo "  progressions manu --to 2025-12-31"
    echo ""
    echo -e "${GREEN}Direct Usage:${NC}"
    echo "  progressions <date> <time> --latitude LAT --longitude LON [options]"
    echo ""
    echo "Required:"
    echo "  date                Birth date (YYYY-MM-DD)"
    echo "  time                Birth time (HH:MM:SS)"
    echo "  --latitude LAT      Birth latitude"
    echo "  --longitude LON     Birth longitude"
    echo ""
    echo "Optional:"
    echo "  --to DATE           Date to progress to (default: today)"
    echo "  --age YEARS         Progress to specific age"
    echo "  --location NAME     Location name"
    echo "  --house-system SYS  House system (placidus, koch, etc.)"
    echo "  --json              Output as JSON"
    echo ""
    echo -e "${YELLOW}Note: Secondary progressions use 1 day = 1 year${NC}"
    echo ""
    exit 0
fi

# Forward to TypeScript implementation
cd "$PROJECT_DIR"
exec npm run progressions -- "$@"